class Solution {
    
    public int recursive(int[] prices,int ind,int buy,int n){
        if(ind==n) return 0;
        int profit=0;
        if(buy==1){
            profit=Math.max(-prices[ind]+recursive(prices,ind+1,0,n),0+recursive(prices,ind+1,1,n));
        }else{
            profit=Math.max(prices[ind]+recursive(prices,ind+1,1,n),0+recursive(prices,ind+1,0,n));
        }
        return profit;
    }

    public int memo(int[] prices,int ind,int buy,int n, int dp[][]){
        if(ind==n) return 0;
        if(dp[ind][buy]!=-1) return dp[ind][buy];
        int profit=0;
        if(buy==1){
            profit=Math.max(-prices[ind]+memo(prices,ind+1,0,n,dp),0+memo(prices,ind+1,1,n,dp));
        }
        else{
            profit=Math.max(prices[ind]+memo(prices,ind+1,1,n,dp),0+memo(prices,ind+1,0,n,dp));
        }
        dp[ind][buy]=profit;
        return profit;
    }

    public int tabulation(int[] prices){
        int n=prices.length;
        int[][] dp=new int[n+1][2];
        dp[n][0]=dp[n][1]=0;
        for(int idx=n-1;idx>=0;idx--){
            for(int buy=0;buy<=1;buy++){
                int profit=0;
                if(buy==1){
                    profit+=Math.max(-prices[idx]+dp[idx+1][0],0+dp[idx+1][1]);
                }
                else{
                    profit+=Math.max(prices[idx]+dp[idx+1][1],0+dp[idx+1][0]);
                }
                dp[idx][buy]=profit;
            }
        }
        return dp[0][1];
    }

    public int maxProfit(int[] prices) {
        // int [][] dp=new int[prices.length][2];
        // for(int [] row:dp)Arrays.fill(row,-1);
        // return memo(prices,0,1,prices.length,dp);
        // return recursive(prices,0,1,prices.length);
        return tabulation(prices);
    }
}
