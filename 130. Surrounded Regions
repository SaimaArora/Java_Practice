class Solution {
    private void dfs(char[][] board, int[][] visited, int[][] directions, int r, int c) {
        int n = board.length, m = board[0].length;
        visited[r][c] = 1;
        for(int dir[] : directions) {
            int nr = r + dir[0], nc = c + dir[1];
            
            if(nr >= 0 && nc >= 0 && nr < n && nc < m && visited[nr][nc] == 0 && board[nr][nc] == 'O') {
                visited[nr][nc] = 1;
                dfs(board, visited, directions, nr, nc);
            }
        }
    }

    public void solve(char[][] board) {
        int n = board.length, m = board[0].length;
        int[][] visited = new int[n][m];
        int[][] directions = new int[][]{{0, 1}, {1, 0}, {-1, 0}, {0, -1}};
        for(int i = 0; i < n; i++) {
            if(board[i][0] == 'O') {
                dfs(board, visited, directions, i, 0);
            }
            if (board[i][m - 1] == 'O') {
                dfs(board, visited, directions, i, m -1);
            }
        }
        for(int i = 0; i < m; i++) {
            if(board[0][i] == 'O') {
                dfs(board, visited, directions, 0, i);
            }
            if (board[n - 1][i] == 'O') {
                dfs(board, visited, directions, n - 1, i);
            }
        }
        for(int i = 0; i < n; i++) {
            for (int j = 0; j < m; j++) {
                if(visited[i][j] == 0 && board[i][j] == 'O'){
                    board[i][j] = 'X';
                }
            }
        }

    }
}
