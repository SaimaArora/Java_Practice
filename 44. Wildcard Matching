class Solution {
    private boolean isAllStars(String p,int ind){
        for(int i=1;i<=ind;i++){
            if(p.charAt(i-1)!='*') return false;
        }
        return true;
    }
    public boolean tabulation(String s,String p,int lenS,int lenP){
        boolean[][] dp=new boolean[lenS+1][lenP+1];
        dp[0][0]=true;
        for(int i=1;i<=lenS;i++){
            dp[i][0]=false;
        }
        for(int i=1;i<=lenP;i++){
            dp[0][i]=isAllStars(p,i);
        }
        for(int i=1;i<=lenS;i++){
            for(int j=1;j<=lenP;j++){
                if((s.charAt(i-1)==p.charAt(j-1)) || (p.charAt(j-1)=='?')) dp[i][j]=dp[i-1][j-1];
                else if(p.charAt(j-1)=='*'){
                    dp[i][j]=dp[i][j-1]||dp[i-1][j];
                }
                else dp[i][j]=false;
            }
        }
        return dp[lenS][lenP];
    }
    public boolean memo(int i,int j, String s,String p, int[][] dp){
        if(i<0 && j<0) return true;
        if(j<0 && i>=0) return false;
        if(i<0 && j>=0){
            for(int k=0;k<=j;k++){
                if(p.charAt(k)!='*') return false;
            }
            return true;
        }
        if(dp[i][j]!=-1) return dp[i][j]==1?true:false;
        if((s.charAt(i)==p.charAt(j)) || (p.charAt(j)=='?')){
            boolean sub=memo(i-1,j-1,s,p,dp);
            dp[i][j]=sub==true?1:0;
            return sub;
        } 
        if(p.charAt(j)=='*'){
            boolean sub=(memo(i,j-1,s,p,dp) || memo(i-1,j,s,p,dp));
            dp[i][j]=sub?1:0;
            return sub;
        }
        dp[i][j]=0;
        return false;
    }
    public boolean recursive(int i, int j, String s, String p){
        if(i<0 && j<0) return true;
        if(j<0) return false;
        if(i<0){
            for(int k=0;k<=j;k++){
                if(p.charAt(k)!='*') return false;
            }
            return true;
        }
        if((s.charAt(i)==p.charAt(j)) || (p.charAt(j)=='?')) recursive(i-1,j-1,s,p);
        if(p.charAt(j)=='*') return recursive(i-1,j-1,s,p) || recursive(i-1,j,s,p);
        return false;
    }
    public boolean isMatch(String s, String p) {
        int lenS=s.length(),lenP=p.length();
        // int[][] dp=new int[lenS+1][lenP+1];
        // for(int[] row:dp){
        //     Arrays.fill(row,-1);
        // }
        // return memo(lenS-1,lenP-1,s,p,dp);
        return tabulation(s,p,lenS,lenP);
    }
}
