class Solution {

    private int recursion(int sum,int rem, int[] nums, int ind, int[] dp[]) {
        if (ind == nums.length){
            if (rem==0) return 0;
            return Integer.MIN_VALUE;
        }
        if(dp[ind][rem] != -2) return dp[ind][rem];
        int newRem = (rem+nums[ind])%3;
        int take = nums[ind]+recursion(sum,newRem, nums, ind+1, dp);
        int notTake = recursion(sum,rem, nums, ind+1, dp);
        
        dp[ind][rem] = Math.max(take, notTake);
        return dp[ind][rem];
    }

    public int maxSumDivThree(int[] nums) {
        int[][] dp = new int[nums.length][3];
        for(int i = 0;i < nums.length;i++) Arrays.fill(dp[i], -2);
        return Math.max(0,recursion(0,0,nums,0,dp));
    }
}
