class RangeFreqQuery {

    Map<Integer, Integer>[] seg;
    int[] arr;
    public RangeFreqQuery(int[] arr) {
        seg = new HashMap[arr.length * 4];
        this.arr = arr;
        build(0, 0, arr.length - 1, seg, arr);
    }

    public void build(int ind, int low, int high, Map<Integer, Integer>[] seg, int[] arr) {
        if (low == high) {
            seg[ind] = new HashMap<>();
            seg[ind].put(arr[low], 1);
            return;
        }
        int mid = (low + high) / 2;
        build(2*ind+1, low, mid, seg, arr);
        build(2 * ind + 2, mid + 1, high, seg, arr);
        seg[ind] = new HashMap<>();
        merge(seg[ind], seg[2*ind+1]);
        merge(seg[ind], seg[2*ind+2]);
    }

    public void merge(Map<Integer, Integer> parent, Map<Integer, Integer> child) {
        for(Map.Entry<Integer, Integer> m  : child.entrySet()) {
            parent.put(m.getKey(), m.getValue() + parent.getOrDefault(m.getKey(), 0));
        }
    }
    
    public int query(int left, int right, int value) {
        return query(0, 0, arr.length - 1, left, right, value);
    }
    private int query(int ind, int low, int high, int left, int right, int value) {
        //no overlap l r low high or low high l r
        if (low > right || high < left) {
            return 0;
        }
        
        //complete overlap l low high r
        if (low>= left && high <= right) {
            return seg[ind].getOrDefault(value, 0);
        }

        //partial low l  r high
        int mid = (low+high)/2;
        int l = query(2*ind+1, low, mid, left, right, value);
        int r = query(2*ind+2, mid+1, high, left, right, value);
        return l+r;
    }
}

/**
 * Your RangeFreqQuery object will be instantiated and called as such:
 * RangeFreqQuery obj = new RangeFreqQuery(arr);
 * int param_1 = obj.query(left,right,value);
 */
