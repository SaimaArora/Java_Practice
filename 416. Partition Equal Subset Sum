import java.util.*;

class Solution {

    boolean memoized(int[] nums, int total, int ind, int curr, int[][] dp) {
        if (curr == total / 2) return true;
        if (ind == nums.length || curr > total / 2) return false;
        if (dp[ind][curr] != -1) {
            return dp[ind][curr] == 1;
        }
        boolean take = memoized(nums, total, ind + 1, curr + nums[ind], dp);
        boolean notTake = memoized(nums, total, ind + 1, curr, dp);
        boolean choice = take || notTake;
        dp[ind][curr] = choice ? 1 : 0;

        return choice;
    }
    
    boolean recursion(int[] nums, int total, int ind, int curr) {
        if (curr == total / 2) return true;
        if (ind == nums.length || curr > total / 2) return false;
        boolean take = recursion(nums, total, ind + 1, curr + nums[ind]);
        boolean notTake = recursion(nums, total, ind + 1, curr);
        return take || notTake;
    }

    public boolean canPartition(int[] nums) {
        int total = 0;
        for (int x : nums) total += x;
        if (total % 2 != 0) return false;
        int target = total / 2;
        int[][] dp = new int[nums.length][target + 1];

        for (int i = 0; i < nums.length; i++) {
            Arrays.fill(dp[i], -1);
        }
        return memoized(nums, total, 0, 0, dp);
    }
}
